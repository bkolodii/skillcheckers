<main class="bc-gray flex nowrap jcsb aifs">
  <section class="chat bc-white flex col nowrap jcsb aic">
    <div class="chat__search w-100 flex nowrap jcfs aic">
      <span aria-hidden="true" class="chat__search--icon icon-icons8-search txt-c-blue"></span>
      <input type="text" class="chat__search--input font-12 bc-white" placeholder="Search this conversation">
      <button class="chat__search--setting bc-gray flex nowrap jcc aic">
        <span aria-hidden="true" class="icon-settings"></span>
      </button>
    </div>
    <!-- <div class="chat__conversation flex nowrap jcc aicc " #scroll [scrollTop]="scroll.scrollHeight"> -->
    <div class="chat__conversation flex nowrap jcc aicc " #scroll>
      <div class="chat__conversation--text flex col nowrap jcsa aife">
        <div class="w-100 flex col nowrap aife jcsa" *ngFor="let message of messages; let i=index">
          <div class="message w-100 flex jcsa aifs" [class]="mainUser?.username == message?.user ? 'row-rev' : ''">
            <img class="message__logo" [src]="message?.userIcon" alt="">
            <div class="message__person-data flex col nowrap jcfs aifs">
              <h2 class="message__person-data--title font-12 w-100"
                [class]="mainUser?.username == message?.user ? 'txt-a-r' : 'txt-a-l'">
                {{message?.user}}
              </h2>
              <p class="message__person-data--text font-11 w-100 txt-c-black"
                [class]="mainUser?.username == message?.user ? 'txt-a-r' : 'txt-a-l'">
                <span (click)="downloadFile(message?.file)" class="txt-c-blue font-11 w-100">{{message?.file?.fileName}}</span>
                {{message?.text}}
              </p>

            </div>
            <div class="message__other-data flex col nowrap jcfs aifs">
              <p class="message__other-data--time font-10 txt-c-initial">
                {{message?.time}}
              </p>

            </div>
          </div>
          <div class="date-period w-100 flex nowrap jcsa aic"
            *ngIf="+messages[i]?.date?.split(' ')[0] < +messages[i+1]?.date?.split(' ')[0]">
            <p class="date-period__date txt-c-initial font-12">
              {{currDate == messages[i+1]?.date ? 'TODAY' : messages[i+1]?.date}}
            </p>
            <hr class="date-period__hr w-100">
          </div>
        </div>
      </div>
    </div>
    <div class="chat__message bc-light-blue flex nowrap jcsb aic w-100">
      <div class="chat__message--upload flex wrap aic jcc">
        <div class="upload-btn-wrapper">
          <button class="btn flex wrap aic jcsa font-12">
            <span aria-hidden="true" class="btn__paper-clip icon-paper-clip"></span>
          </button>
          <input type="file" name="myfile" (change)="getFile($event)">
        </div>
      </div>
      <input type="text" class="chat__message--input font-11 bdc-light-gray" [(ngModel)]="getText" name="getText"
        placeholder="Write a message...">

      <button class="chat__message--send font-11" [disabled]="isDisabled" (click)="sendMessage()">
        Send </button>
    </div>
  </section>
  <section class="person-details bc-white flex col nowrap jcfs aic">
    <div class="person-details__header flex nowrap aic jcsb">
      <img class="person-details__header--user-icon"
        src="https://firebasestorage.googleapis.com/v0/b/skillcheckers-ac855.appspot.com/o/userImg%2Fuser4.png?alt=media&token=02f7edf6-6015-4545-b4c1-7ff79b8aeb4f"
        alt="">
      <div class="person-details__header--info flex nowrap col jcsb aifs">
        <p class="person-name font-14">Albert Flores</p>
        <p class="person-skill font-11">Java Developer</p>
        <p class="person-rate font-10 bc-green flex nowrap aic jcc txt-c-white">8.6</p>
      </div>
    </div>
    <div class="person-details__main flex wrap jcsb aic">
      <div class="person-details__main--speedOfwork">
        <p class="title-of-speed font-9 w-100">SPEED OF WORK</p>
        <p class="text-of-speed font-13 w-100">top 18%</p>
      </div>
      <div class="person-details__main--learnSkills">
        <p class="title-learnSkills font-9 w-100">LEARNING SKILLS</p>
        <p class="text-learnSkills font-13 w-100">top 27%</p>
      </div>
      <div class="person-details__main--date">
        <p class="title-date font-9 w-100">DATE</p>
        <p class="text-date font-13 w-100">11.09.2020</p>
      </div>
      <div class="person-details__main--salaryRange">
        <p class="title-salary font-9 w-100">SALARY RANGE</p>
        <p class="text-salary font-13 w-100">100,000 - 120,000</p>
      </div>
      <div class="person-details__main--experience">
        <p class="title-experience font-9 w-100">EXPERIENCE</p>
        <p class="text-experience font-13 w-100">4+</p>
      </div>
      <div class="person-details__main--location">
        <p class="title-loc font-9 w-100">LOCATION</p>
        <div class="text-loc font-13 w-100 flex wrap jcsb aic">Seatle <span
            class="font-10 bc-gray txt-c-initial flex wrap aic jcc">Remote</span> </div>
      </div>
    </div>
    <div class="person-details__footer flex nowrap jcsb aic ">
      <button class="person-details__footer--interview font-12">Interview</button>
      <button class="person-details__footer--add-person bc-light-blue">
        <span aria-hidden="true" data-icon="&#xe900;" class="add-person icon-add-person"></span>
      </button>
      <button class="person-details__footer--delete-person bc-light-blue">
        <span aria-hidden="true" data-icon="&#xe900;" class="delete-person icon-delete-person"></span>
      </button>
      <button class="person-details__footer--more-option bc-light-blue">
        <span aria-hidden="true" data-icon="&#xe900;" class="more-option icon-more-option"></span>
      </button>
    </div>
  </section>

</main>
